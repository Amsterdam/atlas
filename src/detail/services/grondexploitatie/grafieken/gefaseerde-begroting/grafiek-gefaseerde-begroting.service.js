import { gefaseerdeBegrotingCategories, CATEGORY_LABELS } from '../grondexploitatie-categories';
import { displayFactor, precisionRound } from '../helpers';

const generateGraphData = ({ jaren }) => (
  jaren.map((year) => ({
    name: year.start !== year.end ? `${year.start} - ${year.end}` : `${year.start}`,
    categories: gefaseerdeBegrotingCategories.map((category) => {
      const item = year.categories[category];
      const begrootValue = item.begroot / displayFactor;
      const begrootRounded = precisionRound(begrootValue, 1);
      const begrootTooSmallLabel = begrootValue ? '<0,05' : '';
      const begrootLabel = begrootRounded ? `${begrootRounded}`.replace('.', ',') : begrootTooSmallLabel;
      return {
        ...item,
        begrootLabel,
        begrootValue,
        id: category,
        name: CATEGORY_LABELS[category]
      };
    })
  }))
);

// eslint-disable-next-line camelcase
const getMax = ({ max_jaren_axis_begroot }) => Math.round(max_jaren_axis_begroot / displayFactor);

export {
  generateGraphData,
  getMax
};
