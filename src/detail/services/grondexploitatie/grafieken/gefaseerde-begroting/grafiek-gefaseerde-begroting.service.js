import { gefaseerdeBegrotingCategories, CATEGORY_LABELS } from '../grondexploitatie-categories';
import { displayFactor, precisionRound } from '../helpers';

const generateGraphData = (years) => (
  years.map((year) => ({
    name: year.start !== year.end ? `${year.start} - ${year.end}` : year.start,
    categories: gefaseerdeBegrotingCategories.map((category) => {
      const item = year.categories[category];
      const begrootRounded = precisionRound(item.begroot / displayFactor, 1);
      return {
        ...item,
        begrootLabel: begrootRounded ? `${begrootRounded}`.replace('.', ',') : '',
        begrootValue: item.begroot / displayFactor,
        id: category,
        name: CATEGORY_LABELS[category]
      };
    })
  }))
);

export default generateGraphData;
