import { totaleBegrotingCategories, CATEGORY_LABELS } from '../grondexploitatie-categories';

const AMOUNT = 1000000;

const precisionRound = (number, precision) => {
  const factor = Math.pow(10, precision); //eslint-disable-line
  return Math.round(number * factor) / factor;
};

const generateGraphData = (data) => (
  totaleBegrotingCategories.map((category) => {
    const existingItem = data.find((item) => item.categorie === category);
    return {
      name: CATEGORY_LABELS[category],
      id: category,
      value: {
        value: existingItem ? existingItem.totaal.begroot / AMOUNT : 0,
        label: existingItem ?
          `${precisionRound(existingItem.totaal.begroot / AMOUNT, 1)}`.replace('.', ',') : '0'
      }
    };
  }));

export default generateGraphData;
