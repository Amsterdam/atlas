import { totaleBegrotingCategories, CATEGORY_LABELS } from '../grondexploitatie-categories';
import { displayFactor, precisionRound } from '../helpers';

const generateGraphData = (data) => (
  totaleBegrotingCategories.map((category) => {
    const existingItem = data.find((item) => item.categorie === category);
    const begrootRounded = existingItem &&
      precisionRound(existingItem.totaal.begroot / displayFactor, 1);
    const geboektRounded = existingItem &&
      precisionRound(existingItem.totaal.geboekt / displayFactor, 1);
    return {
      name: CATEGORY_LABELS[category],
      id: category,
      begroot: {
        value: existingItem ? existingItem.totaal.begroot / displayFactor : 0,
        label: begrootRounded ? `${begrootRounded}`.replace('.', ',') : ''
      },
      geboekt: {
        value: existingItem ? existingItem.totaal.geboekt / displayFactor : 0,
        label: geboektRounded ? `${geboektRounded}`.replace('.', ',') : ''
      }
    };
  }));

export default generateGraphData;
