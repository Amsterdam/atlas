import React from 'react';
import PropTypes from 'prop-types';
import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Legend, ResponsiveContainer } from 'recharts';

import CustomLegenda from '../legenda/CustomLegenda';

import grondexploitatieCategoriesInOrder, { getGrondexploitatieCategoryColor } from '../../../services/grondexploitatie/grafieken/grondexploitatie-categories';

import './_grondexploitatie-grafiek-gefaseerde-begroting.scss';

const GrondexploitatieGrafiekGefaseerdeBegroting = ({ data }) => {
  const bars = grondexploitatieCategoriesInOrder.map((category) => (
    <Bar
      dataKey={`${category}.value`}
      fill={getGrondexploitatieCategoryColor(category)}
      key={category}
      name={category}
      stackId="a"
    />
  ));

  return data && (
    <div className="grondexploitatie-grafiek-gefaseerde-begroting">
      <h3 className="grondexploitatie-grafiek-gefaseerde-begroting__title">
        Gefaseerde begroting per categorie (in miljoenen)
      </h3>
      <div className="grondexploitatie-grafiek-gefaseerde-begroting__container">
        <ResponsiveContainer
          width="100%"
          aspect={4.0 / 3.0}
          minWidth={400}
          minHeight={300}
        >
          <BarChart
            barCategoryGap={20}
            maxBarSize={90}
            minPointSize={10}
            layout="vertical"
            data={data}
          >
            <XAxis
              tickLine={false}
              axisLine={false}
              type="number"
              tick={{ fill: '#999' }}
              domain={['auto', (dataMax) => Math.round(dataMax * 1.1)]}
            />
            <YAxis
              width={180}
              tickLine={false}
              axisLine={false}
              hide={false}
              dataKey="name"
              type="category"
              tick={{ fill: '#999' }}
            />
            <CartesianGrid
              horizontal={false}
              fill="#f6f6f6"
            />
            <Legend
              wrapperStyle={{ bottom: '-20px' }}
              content={<CustomLegenda />}
            />
            {
              bars
            }
          </BarChart>
        </ResponsiveContainer>
      </div>
    </div>
  );
};


GrondexploitatieGrafiekGefaseerdeBegroting.defaultProps = {
  data: []
};

GrondexploitatieGrafiekGefaseerdeBegroting.propTypes = {
  data: PropTypes.array // eslint-disable-line
};

export default GrondexploitatieGrafiekGefaseerdeBegroting;
