<div class="c-dashboard"
     ng-class="{
         'c-dashboard--max-width': vm.hasMaxWidth
     }">
        <!-- Header -->
        <div ng-if="!vm.isCatalogus"
             class="qa-dashboard__default-header c-dashboard__heading"
             ng-class="{
                 'c-dashboard__max-width': vm.hasMaxWidth
             }"
             ng-controller="HeaderController as header">

            <div ng-class="{
                     'c-dashboard__max-width__inner': vm.hasMaxWidth
                 }">
                <dp-header
                    query="{{header.query}}"
                    has-print-button="header.hasPrintButton"
                    is-print-mode="vm.isPrintMode"></dp-header>
            </div>
        </div>

        <!-- Header -->
        <div ng-if="vm.isCatalogus" class="qa-dashboard__catalogus-header c-dashboard__heading"
             ng-class="{
                 'c-dashboard__max-width': vm.hasMaxWidth
             }">
            <div class="c-dashboard__max-width__inner">
                <dp-cards-header query="{{vm.dataSelectionState.query}}"></dp-cards-header>
            </div>
        </div>

        <!-- Body -->
        <div class="c-dashboard__body"
            ng-class="{
                'c-dashboard__body--has-footer': vm.isHomePage,
                'c-dashboard__body--error': vm.visibility.httpStatus
            }">
            <div class="u-grid">
                <!-- Error message -->
                <div ng-if="vm.visibility.httpStatus">
                    <dp-api-error></dp-api-error>
                </div>

                <!-- Columns -->
                <div class="u-row">
                    <!-- Left column -->
                    <div ng-show="vm.columnSizes.left"
                        class="qa-dashboard__column--left c-dashboard__column"
                        ng-class="'u-col-sm--' + vm.columnSizes.left">

                        <!-- Layer selection -->
                        <div ng-if="vm.activity.layerSelection" ng-show="vm.visibility.layerSelection" ng-controller="LayerSelectionController as layerSelection" class="qa-layer-selection">
                            <dp-layer-selection
                                base-layer="{{layerSelection.baseLayer}}"
                                overlays="layerSelection.overlays"
                                zoom="layerSelection.zoom">
                            </dp-layer-selection>
                        </div>
                    </div>

                    <!-- Middle column -->
                    <div ng-show="vm.columnSizes.middle"
                        class="c-dashboard__column u-col-sm--{{vm.columnSizes.middle}} qa-dashboard__column--middle">

                        <!-- Map -->
                        <div ng-if="vm.activity.map" ng-show="vm.visibility.map" ng-controller="MapController as map" class="qa-map">
                            <dp-map
                                map-state="map.mapState"
                                show-layer-selection="map.showLayerSelection"
                                markers="map.markers"
                                draw-geometry="map.drawGeometry"
                                resize="[vm.isPrintMode, vm.visibility.httpStatus, vm.visibility.map, vm.columnSizes.middle]">
                            </dp-map>
                        </div>
                    </div>

                    <!-- Right column -->
                    <div ng-show="vm.columnSizes.right"
                        dp-scrollable-content
                        visibility="vm.visibility"
                        page-name="{{vm.pageName}}"
                        class="c-dashboard__column c-dashboard__content u-col-sm--{{vm.columnSizes.right}} qa-dashboard__column--right">

                        <!-- Detail -->
                        <div ng-if="vm.activity.detail" ng-show="vm.visibility.detail" ng-controller="DetailController as detail" class="qa-detail">
                            <dp-detail
                                endpoint="{{detail.endpoint}}"
                                reload="detail.reload"
                                is-loading="detail.isLoading">
                            </dp-detail>
                        </div>

                        <!-- Page -->
                        <div ng-if="vm.activity.page" ng-show="vm.visibility.page" class="c-dashboard__max-width">
                            <div class="c-dashboard__max-width__inner"
                                 ng-class="{
                                     'c-dashboard__max-width__inner--home-page': vm.isHomePage
                                 }">
                                <div ng-controller="PageController as page" class="qa-page">
                                    <dp-page name="{{page.pageName}}"></dp-page>
                                </div>
                            </div>
                        </div>

                        <!-- Search results -->
                        <div ng-if="vm.activity.searchResults" ng-show="vm.visibility.searchResults" ng-controller="SearchResultsController as searchResults" class="qa-search-results">
                            <dp-search-results
                                is-loading="searchResults.isLoading"
                                query="{{searchResults.query}}"
                                location="searchResults.location"
                                category="{{searchResults.category}}"
                                number-of-results="searchResults.numberOfResults">
                            </dp-search-results>
                        </div>

                        <!-- Straatbeeld -->
                        <div ng-if="vm.activity.straatbeeld" ng-show="vm.visibility.straatbeeld"
                            ng-controller="StraatbeeldController as straatbeeld"
                            class="u-dashboard--full-height qa-straatbeeld">

                            <!--Resize straatbeeld when any of printMode, errorMode or fullscreen changes-->
                            <dp-straatbeeld
                                state="straatbeeld.straatbeeldState"
                                resize="[vm.isPrintMode, vm.visibility.httpStatus, vm.visibility.straatbeeld, vm.columnSizes.right]">
                            </dp-straatbeeld>
                        </div>

                        <!-- Data selection -->
                        <div ng-if="vm.activity.dataSelection" ng-show="vm.visibility.dataSelection" ng-controller="DataSelectionController as dataSelection" class="qa-data-selection">
                            <dp-data-selection state="dataSelection.dataSelectionState"></dp-data-selection>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="c-dashboard__max-width">
            <footer class="c-dashboard__footer">
                <div class="c-dashboard__max-width__inner c-dashboard__max-width__inner--home-page">
                    <a href="" target="_blank">Proclaimer</a>
                </div>
            </footer>
        </div>
    </div>
</div>
