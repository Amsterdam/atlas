<div ng-if="!vm.isLoading" class="row">
    <div class="u-pt-2" ng-class="{
        'col-sm-12': !vm.location,
        'col-sm-8': vm.location
        }">

        <div ng-if="vm.numberOfResults">
            <div ng-if="!vm.category">
                <p>
                    {{vm.numberOfResults | number}}
                    {{vm.numberOfResults === 1 ? 'resultaat' : 'resultaten'}}
                    met
                    <span ng-if="vm.query">"<strong>{{vm.query}}</strong>"</span>
                    <span ng-if="vm.location">"<strong>{{vm.location | coordinates}}</strong>"</span>
                </p>

                <div class="u-mb-3" ng-repeat="category in vm.searchResults">
                    <h2>
                        {{category.label}}
                        <span ng-if="category.count > 1">({{category.count | number}})</span>
                    </h2>

                    <atlas-search-results-list category="category"></atlas-search-results-list>

                    <div ng-if="category.count > 10">
                        <dp-link ng-if="category.more"
                                 class-name="btn btn-link u-color-brand-primary u-mt-05"
                                 type="FETCH_DETAIL"
                                 payload="category.more.endpoint">

                            {{category.more.label}}
                        </dp-link>

                        <dp-link ng-if="!category.more"
                                 class-name="btn btn-link u-color-brand-primary u-mt-05"
                                 type="SHOW_SEARCH_RESULTS_CATEGORY"
                                 payload="category.slug">

                            Toon alle {{category.count | number}}
                        </dp-link>
                    </div>
                </div>
            </div>
            <div ng-if="vm.category">
                <p>
                    {{vm.numberOfResults | number}}
                    "<strong>{{vm.categoryName | lowercase}}</strong>"
                    met
                    <span ng-if="vm.query">"<strong>{{vm.query}}</strong>"</span>
                </p>

                <atlas-search-results-list category="vm.category"></atlas-search-results-list>

                <button
                    ng-if="vm.searchResults[0].count > vm.searchResults[0].results.length && !vm.isLoadMoreLoading"
                    class="btn btn-link u-color-brand-primary u-mt-05"
                    ng-click="vm.loadMore()">

                    Toon meer
                </button>

                <span ng-if="vm.isLoadMoreLoading">HIER KOMT OOK EEN LOADING INDICATOR</span>
            </div>
        </div>

        <div ng-if="!vm.numberOfResults">
            <h2>Geen resultaten gevonden</h2>
            <p>Tip: maak de criteria minder specifiek (bijv. een straat i.p.v. specifiek adres)</p>
        </div>

    </div>
    <div ng-if="vm.location" class="col-sm-4">
        <dp-straatbeeld-thumbnail location="vm.location"></dp-straatbeeld-thumbnail>
    </div>
</div>