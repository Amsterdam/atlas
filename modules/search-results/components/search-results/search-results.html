<div class="c-search-results">
    <dp-loading-indicator is-loading="vm.isLoading" use-delay="true" show-inline="true"></dp-loading-indicator>

    <div ng-if="!vm.isLoading" class="u-row">

        <dp-tab-header ng-if="!vm.location.length" title="Resultaten met &quot;{{vm.query}}&quot;" tab-header="vm.tabHeader"></dp-tab-header>

        <div ng-if="vm.numberOfResults" class="qa-search-result">
            <div ng-if="!vm.category">
                <dp-search-results-header
                    number-of-results="vm.numberOfResults"
                    query="{{vm.query}}"
                    location="vm.location">
                </dp-search-results-header>

                <div ng-class="{
                        'u-col-sm--12': !vm.location,
                        'u-col-sm--8': vm.location
                    }">

                    <div ng-repeat="category in vm.searchResults"
                         class="c-search-results__category"
                         ng-class="{
                            'c-search-results__category--indented': category.useIndenting,
                         }">

                        <h2 ng-if="!category.useIndenting" class="c-h2 c-h2--contrast qa-search-header">
                            <span ng-if="category.count > 1">{{category.label_plural}} ({{category.count | number}})</span>
                            <span ng-if="category.count === 1">{{category.label_singular}}</span>
                        </h2>

                        <h3 ng-if="category.useIndenting" class="c-h3 c-h3--light qa-search-header">
                            <span ng-if="category.count > 1">{{category.label_plural}} ({{category.count | number}})</span>
                            <span ng-if="category.count === 1">{{category.label_singular}}</span>
                        </h3>

                        <dp-search-results-list category="category" limit-results="true"></dp-search-results-list>

                        <div ng-if="category.count > 10" class="qa-show-more">
                            <dp-link ng-if="category.more"
                                class-name="c-search-results__show-more c-show-more c-show-more--contrast"
                                type="FETCH_DETAIL"
                                payload="category.more.endpoint">

                                {{category.more.label}}
                            </dp-link>

                            <dp-link ng-if="!category.more"
                                class-name="c-search-results__show-more c-show-more"
                                type="FETCH_SEARCH_RESULTS_CATEGORY"
                                payload="category.slug">

                                Toon alle {{category.count | number}}
                            </dp-link>
                        </div>
                    </div>
                </div>

                <div ng-if="vm.location" class="u-col-sm--4">
                    <dp-straatbeeld-thumbnail location="vm.location"></dp-straatbeeld-thumbnail>
                </div>
            </div>
            <div ng-if="vm.category">
                <dp-search-results-header
                    number-of-results="vm.numberOfResults"
                    query="{{vm.query}}"
                    category="{{vm.category}}">
                </dp-search-results-header>

                <div ng-class="{
                        'u-col-sm--12': !vm.location,
                        'u-col-sm--8': vm.location
                    }">

                    <dp-search-results-list category="vm.searchResults[0]"></dp-search-results-list>

                    <button
                        ng-if="vm.hasLoadMore()"
                        class="c-search-results__show-more c-show-more"
                        ng-click="vm.loadMore()">

                        Toon meer
                    </button>

                    <dp-loading-indicator is-loading="vm.isLoadMoreLoading" use-delay="true" show-inline="true">
                    </dp-loading-indicator>
                </div>

                <div ng-if="vm.location" class="u-col-sm--4">
                    <dp-straatbeeld-thumbnail location="vm.location"></dp-straatbeeld-thumbnail>
                </div>
            </div>
        </div>

        <div ng-if="!vm.numberOfResults">
            <dp-search-results-header
                number-of-results="vm.numberOfResults"
                query="{{vm.query}}"
                location="vm.location">
            </dp-search-results-header>

            <div ng-class="{
                    'u-col-sm--12': !vm.location,
                    'u-col-sm--8': vm.location
                }">

                <p>Tip: maak de criteria minder specifiek (bijv. een straat i.p.v. specifiek adres)</p>
            </div>

            <div ng-if="vm.location" class="u-col-sm--4">
                <dp-straatbeeld-thumbnail location="vm.location"></dp-straatbeeld-thumbnail>
            </div>
        </div>
    </div>
</div>
