<div ng-if="vm.showHeader" ng-class="{
        'u-margin__bottom--3': vm.showTabs || !vm.showActiveFilters,
        'u-margin__bottom--1-5': !(vm.showTabs || !vm.showActiveFilters)
    }">
    <div ng-if="vm.showButtons" class="u-pull--right qa-buttons">
        <div class="u-inline-block u-margin__right--1">
            <dp-data-selection-toggle-view-button view="vm.state.view"></dp-data-selection-toggle-view-button>
        </div>
        <div class="u-inline-block">
            <dp-data-selection-download-button dataset="{{vm.state.dataset}}" active-filters="vm.state.filters" geometry-filter="vm.state.geometryFilter">
            </dp-data-selection-download-button>
        </div>
    </div>

    <div ng-if="vm.showTitle" class="qa-title">
        <h1 ng-if="vm.state.view === 'TABLE'">{{vm.datasetTitle}} ({{vm.numberOfRecords | number}})</h1>
        <h1 ng-if="vm.state.view === 'CARDS'">Dataset<span ng-if="vm.numberOfRecords !== 1">s</span> ({{vm.numberOfRecords | number}})</h1>
        <h1 ng-if="vm.state.view === 'LIST'">Resultaten</h1>
    </div>

    <h2 ng-if="vm.showNoResultsFound && !vm.showTabs" class="qa-no-results-found">Geen resultaten gevonden</h2>

    <h3 ng-if="vm.showSearchQuery" class="u-font--s qa-search-query">met "{{vm.state.query}}"</h3>
</div>


<div ng-if="vm.showTabs" class="o-tabs qa-tabs u-margin__bottom--1-5">
    <ul>
        <li ng-repeat="tab in vm.tabs" ng-class="{'is-active': tab.isActive}">
            <dp-link ng-if="!tab.isActive" type="FETCH_DATA_SELECTION" payload="{dataset: tab.dataset, filters: vm.state.filters, page: 1, view: 'LIST'}" class-name="o-tabs__tab o-tabs__tab--link">
                {{tab.title}}
            </dp-link>

            <span ng-if="tab.isActive" class="o-tabs__tab o-tabs__tab--active">
                {{tab.title}}
                <span ng-if="!vm.isLoading && tab.isActive">({{vm.numberOfRecords | number}})</span>
            </span>
        </li>
    </ul>
</div>

<div ng-if="vm.showActiveFilters" class="qa-active-filters">
    <dp-data-selection-active-filters
        dataset="{{vm.state.dataset}}",
        available-filters="vm.availableFilters"
        text-filters="vm.state.filters",
        geometry-filter="vm.state.geometryFilter">
    </dp-data-selection-active-filters>
</div>

<p ng-if="vm.showNoResultsFound && vm.showTabs" class="qa-no-results-found">Geen resultaten gevonden</p>

<dp-loading-indicator is-loading="vm.isLoading" use-delay="false" show-inline="true"></dp-loading-indicator>
